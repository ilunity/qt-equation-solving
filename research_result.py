from PyQt5 import QtCore, QtGui, QtWidgets
import json


class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(680, 310)
        Form.setMinimumSize(QtCore.QSize(680, 310))
        Form.setMaximumSize(QtCore.QSize(680, 310))
        Form.setStyleSheet("background-color: rgb(70, 70, 70);\n"
                           "color: white;")
        self.time_of_algorithms_frame = QtWidgets.QFrame(Form)
        self.time_of_algorithms_frame.setGeometry(QtCore.QRect(20, 20, 640, 271))
        self.time_of_algorithms_frame.setStyleSheet("background-color: rgb(94, 94, 94);\n"
                                                    "border-radius: 5px;")
        self.time_of_algorithms_frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.time_of_algorithms_frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.time_of_algorithms_frame.setObjectName("time_of_algorithms_frame")
        self.first_chord_algorithm_label = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.first_chord_algorithm_label.setGeometry(QtCore.QRect(200, 50, 91, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.first_chord_algorithm_label.setFont(font)
        self.first_chord_algorithm_label.setObjectName("first_chord_algorithm_label")
        self.binary_algorithm_label = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.binary_algorithm_label.setGeometry(QtCore.QRect(435, 50, 141, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.binary_algorithm_label.setFont(font)
        self.binary_algorithm_label.setObjectName("binary_algorithm_label")
        self.iteration_number_label = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.iteration_number_label.setGeometry(QtCore.QRect(155, 10, 330, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setItalic(True)
        font.setWeight(75)
        self.iteration_number_label.setFont(font)
        self.iteration_number_label.setStyleSheet("color: rgb(234, 134, 52);")
        self.iteration_number_label.setObjectName("iteration_number_label")
        self.line = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line.setGeometry(QtCore.QRect(0, 40, 640, 2))
        self.line.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line.setFrameShape(QtWidgets.QFrame.HLine)
        self.line.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line.setObjectName("line")
        self.line_2 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_2.setGeometry(QtCore.QRect(0, 80, 640, 2))
        self.line_2.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line_2.setFrameShape(QtWidgets.QFrame.HLine)
        self.line_2.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_2.setObjectName("line_2")
        self.accuracy_label = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.accuracy_label.setGeometry(QtCore.QRect(25, 50, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.accuracy_label.setFont(font)
        self.accuracy_label.setObjectName("accuracy_label")
        self.line_3 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_3.setGeometry(QtCore.QRect(0, 120, 640, 2))
        self.line_3.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line_3.setFrameShape(QtWidgets.QFrame.HLine)
        self.line_3.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_3.setObjectName("line_3")
        self.line_4 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_4.setGeometry(QtCore.QRect(122, 40, 2, 160))
        self.line_4.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line_4.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_4.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_4.setObjectName("line_4")
        self.line_5 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_5.setGeometry(QtCore.QRect(0, 160, 640, 2))
        self.line_5.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line_5.setFrameShape(QtWidgets.QFrame.HLine)
        self.line_5.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_5.setObjectName("line_5")
        self.line_6 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_6.setGeometry(QtCore.QRect(0, 200, 640, 2))
        self.line_6.setStyleSheet("background-color: rgb(171, 171, 171);")
        self.line_6.setFrameShape(QtWidgets.QFrame.HLine)
        self.line_6.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_6.setObjectName("line_6")
        self.line_7 = QtWidgets.QFrame(self.time_of_algorithms_frame)
        self.line_7.setGeometry(QtCore.QRect(370, 40, 2, 160))
        self.line_7.setStyleSheet("background-color: rgb(171, 171, 171);\n"
                                  "")
        self.line_7.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_7.setFrameShadow(QtWidgets.QFrame.Sunken)
        self.line_7.setObjectName("line_7")
        self.exit_research_btn = QtWidgets.QPushButton(self.time_of_algorithms_frame)
        self.exit_research_btn.setGeometry(QtCore.QRect(500, 220, 121, 41))
        font = QtGui.QFont()
        font.setPointSize(10)
        self.exit_research_btn.setFont(font)
        self.exit_research_btn.setStyleSheet("#exit_research_btn {\n"
                                             "    background-color: rgb(0, 129, 194);\n"
                                             "    color: white;\n"
                                             "    border-radius: 5px;\n"
                                             "}\n"
                                             "#exit_research_btn:hover {\n"
                                             "    background-color: rgb(2, 190, 218);\n"
                                             "} \n"
                                             "#exit_research_btn:pressed {\n"
                                             "    background-color: rgb(23, 92, 252);\n"
                                             "}")
        self.exit_research_btn.setObjectName("exit_research_btn")
        self.info_label = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.info_label.setGeometry(QtCore.QRect(10, 240, 381, 16))
        self.info_label.setObjectName("info_label")
        self.accuracy_1 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.accuracy_1.setGeometry(QtCore.QRect(25, 90, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.accuracy_1.setFont(font)
        self.accuracy_1.setObjectName("accuracy_1")
        self.accuracy_2 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.accuracy_2.setGeometry(QtCore.QRect(25, 130, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.accuracy_2.setFont(font)
        self.accuracy_2.setObjectName("accuracy_2")
        self.accuracy_3 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.accuracy_3.setGeometry(QtCore.QRect(25, 170, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.accuracy_3.setFont(font)
        self.accuracy_3.setObjectName("accuracy_3")
        self.chord_iterations_1 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.chord_iterations_1.setGeometry(QtCore.QRect(210, 90, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.chord_iterations_1.setFont(font)
        self.chord_iterations_1.setObjectName("chord_iterations_1")
        self.chord_iterations_2 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.chord_iterations_2.setGeometry(QtCore.QRect(210, 130, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.chord_iterations_2.setFont(font)
        self.chord_iterations_2.setObjectName("chord_iterations_2")
        self.chord_iterations_3 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.chord_iterations_3.setGeometry(QtCore.QRect(210, 170, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.chord_iterations_3.setFont(font)
        self.chord_iterations_3.setObjectName("chord_iterations_3")
        self.binary_iterations_1 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.binary_iterations_1.setGeometry(QtCore.QRect(470, 90, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.binary_iterations_1.setFont(font)
        self.binary_iterations_1.setObjectName("binary_iterations_1")
        self.binary_iterations_2 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.binary_iterations_2.setGeometry(QtCore.QRect(470, 130, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.binary_iterations_2.setFont(font)
        self.binary_iterations_2.setObjectName("binary_iterations_2")
        self.binary_iterations_3 = QtWidgets.QLabel(self.time_of_algorithms_frame)
        self.binary_iterations_3.setGeometry(QtCore.QRect(470, 170, 70, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        self.binary_iterations_3.setFont(font)
        self.binary_iterations_3.setObjectName("binary_iterations_3")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

        self.load_data()
        self.btn_handler()

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "Исследование сходимости"))
        self.first_chord_algorithm_label.setText(_translate("Form", "Метод хорд"))
        self.binary_algorithm_label.setText(_translate("Form", "Метод дихотомии"))
        self.iteration_number_label.setText(_translate("Form", "Подсчет количества итераций:"))
        self.accuracy_label.setText(_translate("Form", "Точность"))
        self.exit_research_btn.setText(_translate("Form", "Закрыть"))
        self.info_label.setText(_translate("Form", "Точность указывается как число верных знаков после запятой"))
        self.accuracy_1.setText(_translate("Form", "Точность"))
        self.accuracy_2.setText(_translate("Form", "Точность"))
        self.accuracy_3.setText(_translate("Form", "Точность"))
        self.chord_iterations_1.setText(_translate("Form", "Точность"))
        self.chord_iterations_2.setText(_translate("Form", "Точность"))
        self.chord_iterations_3.setText(_translate("Form", "Точность"))
        self.binary_iterations_1.setText(_translate("Form", "Точность"))
        self.binary_iterations_2.setText(_translate("Form", "Точность"))
        self.binary_iterations_3.setText(_translate("Form", "Точность"))

    def load_data(self):
        with open("data/research_data.json", "r") as file:
            research_data = json.load(file)

        chord_results = research_data["iteration_number"]["chord_method"]
        binary_results = research_data["iteration_number"]["binary_method"]
        compared_accuracy = research_data["compared_accuracy"]

        self.accuracy_1.setText(str(compared_accuracy[0]))
        self.accuracy_2.setText(str(compared_accuracy[1]))
        self.accuracy_3.setText(str(compared_accuracy[2]))

        self.chord_iterations_1.setText(str(chord_results[0]))
        self.chord_iterations_2.setText(str(chord_results[1]))
        self.chord_iterations_3.setText(str(chord_results[2]))

        self.binary_iterations_1.setText(str(binary_results[0]))
        self.binary_iterations_2.setText(str(binary_results[1]))
        self.binary_iterations_3.setText(str(binary_results[2]))

    def btn_handler(self):
        pass
        # todo сделать закрытие окна
        # self.exit_research_btn.clicked.connect(QtCore.QCoreApplication.instance().quit)
        # self.exit_research_btn.clicked.connect(self.)

if __name__ == "__main__":
    import sys

    app = QtWidgets.QApplication(sys.argv)
    Window = QtWidgets.QMainWindow()
    settings_window = Ui_Form()
    settings_window.setupUi(Window)
    Window.show()

    sys.exit(app.exec_())
